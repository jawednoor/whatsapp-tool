<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù…ÙˆÙ„Ø¯ Ø±ÙˆØ§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ù…Ø±ÙÙ‚</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background-color: #f0f0f0;
    }
    textarea, input[type="file"], input[type="text"], button {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    .number-entry {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #ffffff;
      padding: 10px;
      margin-bottom: 5px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    .number-link {
      flex-grow: 1;
      color: #007bff;
      text-decoration: none;
      margin-left: 10px;
    }
    .number-link.sent {
      color: #155724;
    }
    .delete-btn {
      background-color: #ff4d4d;
      border: none;
      color: white;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    .delete-btn:hover {
      background-color: #cc0000;
    }
  </style>
</head>
<body>

  <h2>Ù…ÙˆÙ„Ø¯ Ø±ÙˆØ§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ù…Ø±ÙÙ‚</h2>

  <label>ğŸ“ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø£Ø±Ù‚Ø§Ù… Ù…Ù† Ù…Ù„Ù TXT (ÙƒÙ„ Ø±Ù‚Ù… ÙÙŠ Ø³Ø·Ø±)</label>
  <input type="file" id="fileInput" accept=".txt">

  <label>âœï¸ Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙŠØ¯ÙˆÙŠÙ‹Ø§ (ÙƒÙ„ Ø±Ù‚Ù… ÙÙŠ Ø³Ø·Ø±)</label>
  <textarea id="numbers" rows="6" placeholder="Ù…Ø«Ø§Ù„:\n+966500000000\n+201000000000"></textarea>

  <label>ğŸ’¬ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</label>
  <textarea id="message" rows="4" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..."></textarea>

  <label>ğŸ“ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø±ÙÙ‚ (ØµÙˆØ±Ø©ØŒ Ù…Ù„Ù PDFØŒ Google Drive...)</label>
  <input type="text" id="attachment" placeholder="https://example.com/file.pdf">

  <button onclick="generateLinks()">ğŸš€ ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</button>
  <button onclick="exportRemaining()">ğŸ“¤ ØªØµØ¯ÙŠØ± Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</button>

  <div id="numbersContainer"></div>

  <script>
    const fileInput = document.getElementById("fileInput");
    const numbersTextarea = document.getElementById("numbers");
    const messageInput = document.getElementById("message");
    const attachmentInput = document.getElementById("attachment");
    const numbersContainer = document.getElementById("numbersContainer");

    fileInput.addEventListener("change", (event) => {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = (e) => {
        const imported = e.target.result.trim();
        numbersTextarea.value = imported;
      };
      reader.readAsText(file);
    });

    function generateLinks() {
      const rawNumbers = numbersTextarea.value.trim();
      const message = messageInput.value.trim();
      const attachment = attachmentInput.value.trim();
      numbersContainer.innerHTML = "";

      if (!rawNumbers || !message) {
        numbersContainer.innerHTML = "<strong>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙˆØ§Ù„Ø±Ø³Ø§Ù„Ø©.</strong>";
        return;
      }

      const fullMessage = attachment ? `${message}\\n${attachment}` : message;
      const encodedMessage = encodeURIComponent(fullMessage);

      const numbers = rawNumbers.split('\\n')
        .map(n => n.replace(/\\s+/g, '').trim())
        .filter(n => n.startsWith('+'));

      numbers.forEach(number => {
        const container = document.createElement("div");
        container.className = "number-entry";

        const link = document.createElement("a");
        link.href = `https://wa.me/${number.replace('+', '')}?text=${encodedMessage}`;
        link.target = "_blank";
        link.className = "number-link";
        link.textContent = number;

        link.addEventListener("click", () => {
          link.classList.add("sent");
          link.textContent = number + " âœ… ØªÙ… Ø§Ù„ÙØªØ­";
        });

        const deleteBtn = document.createElement("button");
        deleteBtn.className = "delete-btn";
        deleteBtn.textContent = "âŒ";
        deleteBtn.onclick = () => container.remove();

        container.appendChild(link);
        container.appendChild(deleteBtn);
        numbersContainer.appendChild(container);
      });
    }

    function exportRemaining() {
      const links = document.querySelectorAll(".number-link");
      const numbers = [];

      links.forEach(link => {
        const text = link.textContent.replace(" âœ… ØªÙ… Ø§Ù„ÙØªØ­", "").trim();
        if (text.startsWith("+")) {
          numbers.push(text);
        }
      });

      const blob = new Blob([numbers.join("\\n")], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "filtered_numbers.txt";
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>

</body>
</html>
